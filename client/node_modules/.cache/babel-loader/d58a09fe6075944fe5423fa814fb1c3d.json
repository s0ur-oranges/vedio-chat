{"ast":null,"code":"import _objectSpread from\"C:/Users/Jahanvi Chaudhary/Desktop/webRTC-advanced/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/Jahanvi Chaudhary/Desktop/webRTC-advanced/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{setDirectChatHistory}from\"../store/actions\";import store from\"../store/store\";export var appendNewMessageToChatHistory=function appendNewMessageToChatHistory(data){var isAuthor=data.isAuthor,receiverSocketId=data.receiverSocketId,authorSocketId=data.authorSocketId;if(isAuthor){appendMessageToChatHistory(receiverSocketId,data);}else{appendMessageToChatHistory(authorSocketId,data);}};var appendMessageToChatHistory=function appendMessageToChatHistory(userSocketId,data){var chatHistory=_toConsumableArray(store.getState().directChatHistory);var userChatHistory=chatHistory.find(function(h){return h.socketId===userSocketId;});if(userChatHistory){var newDirectMessage={isAuthor:data.isAuthor,messageContent:data.messageContent,identity:data.identity};var newUserChatHistory=_objectSpread(_objectSpread({},userChatHistory),{},{chatHistory:[].concat(_toConsumableArray(userChatHistory.chatHistory),[newDirectMessage])});var newChatHistory=[].concat(_toConsumableArray(chatHistory.filter(function(h){return h.socketId!==userSocketId;})),[newUserChatHistory]);store.dispatch(setDirectChatHistory(newChatHistory));}else{var _newUserChatHistory={socketId:userSocketId,chatHistory:[{isAuthor:data.isAuthor,messageContent:data.messageContent,identity:data.identity}]};var _newChatHistory=[].concat(_toConsumableArray(chatHistory),[_newUserChatHistory]);store.dispatch(setDirectChatHistory(_newChatHistory));}};","map":{"version":3,"names":["setDirectChatHistory","store","appendNewMessageToChatHistory","data","isAuthor","receiverSocketId","authorSocketId","appendMessageToChatHistory","userSocketId","chatHistory","getState","directChatHistory","userChatHistory","find","h","socketId","newDirectMessage","messageContent","identity","newUserChatHistory","newChatHistory","filter","dispatch"],"sources":["C:/Users/Jahanvi Chaudhary/Desktop/webRTC-advanced/client/src/utils/directMessages.js"],"sourcesContent":["import { setDirectChatHistory } from \"../store/actions\";\r\nimport store from \"../store/store\";\r\n\r\nexport const appendNewMessageToChatHistory = (data) => {\r\n  const { isAuthor, receiverSocketId, authorSocketId } = data;\r\n\r\n  if (isAuthor) {\r\n    appendMessageToChatHistory(receiverSocketId, data);\r\n  } else {\r\n    appendMessageToChatHistory(authorSocketId, data);\r\n  }\r\n};\r\n\r\nconst appendMessageToChatHistory = (userSocketId, data) => {\r\n  const chatHistory = [...store.getState().directChatHistory];\r\n\r\n  const userChatHistory = chatHistory.find((h) => h.socketId === userSocketId);\r\n\r\n  if (userChatHistory) {\r\n    const newDirectMessage = {\r\n      isAuthor: data.isAuthor,\r\n      messageContent: data.messageContent,\r\n      identity: data.identity,\r\n    };\r\n\r\n    const newUserChatHistory = {\r\n      ...userChatHistory,\r\n      chatHistory: [...userChatHistory.chatHistory, newDirectMessage],\r\n    };\r\n\r\n    const newChatHistory = [\r\n      ...chatHistory.filter((h) => h.socketId !== userSocketId),\r\n      newUserChatHistory,\r\n    ];\r\n\r\n    store.dispatch(setDirectChatHistory(newChatHistory));\r\n  } else {\r\n    const newUserChatHistory = {\r\n      socketId: userSocketId,\r\n      chatHistory: [\r\n        {\r\n          isAuthor: data.isAuthor,\r\n          messageContent: data.messageContent,\r\n          identity: data.identity,\r\n        },\r\n      ],\r\n    };\r\n\r\n    const newChatHistory = [...chatHistory, newUserChatHistory];\r\n\r\n    store.dispatch(setDirectChatHistory(newChatHistory));\r\n  }\r\n};\r\n"],"mappings":"qSAAA,OAASA,oBAAT,KAAqC,kBAArC,CACA,MAAOC,MAAP,KAAkB,gBAAlB,CAEA,MAAO,IAAMC,8BAA6B,CAAG,QAAhCA,8BAAgC,CAACC,IAAD,CAAU,CACrD,GAAQC,SAAR,CAAuDD,IAAvD,CAAQC,QAAR,CAAkBC,gBAAlB,CAAuDF,IAAvD,CAAkBE,gBAAlB,CAAoCC,cAApC,CAAuDH,IAAvD,CAAoCG,cAApC,CAEA,GAAIF,QAAJ,CAAc,CACZG,0BAA0B,CAACF,gBAAD,CAAmBF,IAAnB,CAA1B,CACD,CAFD,IAEO,CACLI,0BAA0B,CAACD,cAAD,CAAiBH,IAAjB,CAA1B,CACD,CACF,CARM,CAUP,GAAMI,2BAA0B,CAAG,QAA7BA,2BAA6B,CAACC,YAAD,CAAeL,IAAf,CAAwB,CACzD,GAAMM,YAAW,oBAAOR,KAAK,CAACS,QAAN,GAAiBC,iBAAxB,CAAjB,CAEA,GAAMC,gBAAe,CAAGH,WAAW,CAACI,IAAZ,CAAiB,SAACC,CAAD,QAAOA,EAAC,CAACC,QAAF,GAAeP,YAAtB,EAAjB,CAAxB,CAEA,GAAII,eAAJ,CAAqB,CACnB,GAAMI,iBAAgB,CAAG,CACvBZ,QAAQ,CAAED,IAAI,CAACC,QADQ,CAEvBa,cAAc,CAAEd,IAAI,CAACc,cAFE,CAGvBC,QAAQ,CAAEf,IAAI,CAACe,QAHQ,CAAzB,CAMA,GAAMC,mBAAkB,gCACnBP,eADmB,MAEtBH,WAAW,8BAAMG,eAAe,CAACH,WAAtB,GAAmCO,gBAAnC,EAFW,EAAxB,CAKA,GAAMI,eAAc,8BACfX,WAAW,CAACY,MAAZ,CAAmB,SAACP,CAAD,QAAOA,EAAC,CAACC,QAAF,GAAeP,YAAtB,EAAnB,CADe,GAElBW,kBAFkB,EAApB,CAKAlB,KAAK,CAACqB,QAAN,CAAetB,oBAAoB,CAACoB,cAAD,CAAnC,EACD,CAlBD,IAkBO,CACL,GAAMD,oBAAkB,CAAG,CACzBJ,QAAQ,CAAEP,YADe,CAEzBC,WAAW,CAAE,CACX,CACEL,QAAQ,CAAED,IAAI,CAACC,QADjB,CAEEa,cAAc,CAAEd,IAAI,CAACc,cAFvB,CAGEC,QAAQ,CAAEf,IAAI,CAACe,QAHjB,CADW,CAFY,CAA3B,CAWA,GAAME,gBAAc,8BAAOX,WAAP,GAAoBU,mBAApB,EAApB,CAEAlB,KAAK,CAACqB,QAAN,CAAetB,oBAAoB,CAACoB,eAAD,CAAnC,EACD,CACF,CAvCD"},"metadata":{},"sourceType":"module"}