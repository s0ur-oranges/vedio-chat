{"ast":null,"code":"import { setDirectChatHistory } from \"../store/actions\";\nimport store from \"../store/store\";\nexport const appendNewMessageToChatHistory = data => {\n  const {\n    isAuthor,\n    receiverSocketId,\n    authorSocketId\n  } = data;\n\n  if (isAuthor) {\n    appendMessageToChatHistory(receiverSocketId, data);\n  } else {\n    appendMessageToChatHistory(authorSocketId, data);\n  }\n};\n\nconst appendMessageToChatHistory = (userSocketId, data) => {\n  const chatHistory = [...store.getState().directChatHistory];\n  const userChatHistory = chatHistory.find(h => h.socketId === userSocketId);\n\n  if (userChatHistory) {\n    const newDirectMessage = {\n      isAuthor: data.isAuthor,\n      messageContent: data.messageContent,\n      identity: data.identity\n    };\n    const newUserChatHistory = { ...userChatHistory,\n      chatHistory: [...userChatHistory.chatHistory, newDirectMessage]\n    };\n    const newChatHistory = [...chatHistory.filter(h => h.socketId !== userSocketId), newUserChatHistory];\n    store.dispatch(setDirectChatHistory(newChatHistory));\n  } else {\n    const newUserChatHistory = {\n      socketId: userSocketId,\n      chatHistory: [{\n        isAuthor: data.isAuthor,\n        messageContent: data.messageContent,\n        identity: data.identity\n      }]\n    };\n    const newChatHistory = [...chatHistory, newUserChatHistory];\n    store.dispatch(setDirectChatHistory(newChatHistory));\n  }\n};","map":{"version":3,"names":["setDirectChatHistory","store","appendNewMessageToChatHistory","data","isAuthor","receiverSocketId","authorSocketId","appendMessageToChatHistory","userSocketId","chatHistory","getState","directChatHistory","userChatHistory","find","h","socketId","newDirectMessage","messageContent","identity","newUserChatHistory","newChatHistory","filter","dispatch"],"sources":["C:/Users/Jahanvi Chaudhary/Desktop/webRTC-advanced/client/src/utils/directMessages.js"],"sourcesContent":["import { setDirectChatHistory } from \"../store/actions\";\r\nimport store from \"../store/store\";\r\n\r\nexport const appendNewMessageToChatHistory = (data) => {\r\n  const { isAuthor, receiverSocketId, authorSocketId } = data;\r\n\r\n  if (isAuthor) {\r\n    appendMessageToChatHistory(receiverSocketId, data);\r\n  } else {\r\n    appendMessageToChatHistory(authorSocketId, data);\r\n  }\r\n};\r\n\r\nconst appendMessageToChatHistory = (userSocketId, data) => {\r\n  const chatHistory = [...store.getState().directChatHistory];\r\n\r\n  const userChatHistory = chatHistory.find((h) => h.socketId === userSocketId);\r\n\r\n  if (userChatHistory) {\r\n    const newDirectMessage = {\r\n      isAuthor: data.isAuthor,\r\n      messageContent: data.messageContent,\r\n      identity: data.identity,\r\n    };\r\n\r\n    const newUserChatHistory = {\r\n      ...userChatHistory,\r\n      chatHistory: [...userChatHistory.chatHistory, newDirectMessage],\r\n    };\r\n\r\n    const newChatHistory = [\r\n      ...chatHistory.filter((h) => h.socketId !== userSocketId),\r\n      newUserChatHistory,\r\n    ];\r\n\r\n    store.dispatch(setDirectChatHistory(newChatHistory));\r\n  } else {\r\n    const newUserChatHistory = {\r\n      socketId: userSocketId,\r\n      chatHistory: [\r\n        {\r\n          isAuthor: data.isAuthor,\r\n          messageContent: data.messageContent,\r\n          identity: data.identity,\r\n        },\r\n      ],\r\n    };\r\n\r\n    const newChatHistory = [...chatHistory, newUserChatHistory];\r\n\r\n    store.dispatch(setDirectChatHistory(newChatHistory));\r\n  }\r\n};\r\n"],"mappings":"AAAA,SAASA,oBAAT,QAAqC,kBAArC;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AAEA,OAAO,MAAMC,6BAA6B,GAAIC,IAAD,IAAU;EACrD,MAAM;IAAEC,QAAF;IAAYC,gBAAZ;IAA8BC;EAA9B,IAAiDH,IAAvD;;EAEA,IAAIC,QAAJ,EAAc;IACZG,0BAA0B,CAACF,gBAAD,EAAmBF,IAAnB,CAA1B;EACD,CAFD,MAEO;IACLI,0BAA0B,CAACD,cAAD,EAAiBH,IAAjB,CAA1B;EACD;AACF,CARM;;AAUP,MAAMI,0BAA0B,GAAG,CAACC,YAAD,EAAeL,IAAf,KAAwB;EACzD,MAAMM,WAAW,GAAG,CAAC,GAAGR,KAAK,CAACS,QAAN,GAAiBC,iBAArB,CAApB;EAEA,MAAMC,eAAe,GAAGH,WAAW,CAACI,IAAZ,CAAkBC,CAAD,IAAOA,CAAC,CAACC,QAAF,KAAeP,YAAvC,CAAxB;;EAEA,IAAII,eAAJ,EAAqB;IACnB,MAAMI,gBAAgB,GAAG;MACvBZ,QAAQ,EAAED,IAAI,CAACC,QADQ;MAEvBa,cAAc,EAAEd,IAAI,CAACc,cAFE;MAGvBC,QAAQ,EAAEf,IAAI,CAACe;IAHQ,CAAzB;IAMA,MAAMC,kBAAkB,GAAG,EACzB,GAAGP,eADsB;MAEzBH,WAAW,EAAE,CAAC,GAAGG,eAAe,CAACH,WAApB,EAAiCO,gBAAjC;IAFY,CAA3B;IAKA,MAAMI,cAAc,GAAG,CACrB,GAAGX,WAAW,CAACY,MAAZ,CAAoBP,CAAD,IAAOA,CAAC,CAACC,QAAF,KAAeP,YAAzC,CADkB,EAErBW,kBAFqB,CAAvB;IAKAlB,KAAK,CAACqB,QAAN,CAAetB,oBAAoB,CAACoB,cAAD,CAAnC;EACD,CAlBD,MAkBO;IACL,MAAMD,kBAAkB,GAAG;MACzBJ,QAAQ,EAAEP,YADe;MAEzBC,WAAW,EAAE,CACX;QACEL,QAAQ,EAAED,IAAI,CAACC,QADjB;QAEEa,cAAc,EAAEd,IAAI,CAACc,cAFvB;QAGEC,QAAQ,EAAEf,IAAI,CAACe;MAHjB,CADW;IAFY,CAA3B;IAWA,MAAME,cAAc,GAAG,CAAC,GAAGX,WAAJ,EAAiBU,kBAAjB,CAAvB;IAEAlB,KAAK,CAACqB,QAAN,CAAetB,oBAAoB,CAACoB,cAAD,CAAnC;EACD;AACF,CAvCD"},"metadata":{},"sourceType":"module"}