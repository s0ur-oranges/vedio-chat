(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{113:function(e,t,n){},137:function(e,t){},139:function(e,t){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var c,a=n(1),o=n.n(a),r=n(43),s=n.n(r),i=(n(84),n(35)),u=n(4),l=n(0),d=function(e){var t=e.createRoomButton,n=void 0!==t&&t,c=e.buttonText,a=e.onClickHandler,o=n?"create_room_button":"join_room_button";return Object(l.jsx)("button",{className:o,onClick:a,children:c})},j=function(){var e=Object(u.f)();return Object(l.jsxs)("div",{className:"connecting_buttons_container",children:[Object(l.jsx)(d,{buttonText:"Join a meeting",onClickHandler:function(){e.push("/join-room")}}),Object(l.jsx)(d,{createRoomButton:!0,buttonText:"Host a meeting",onClickHandler:function(){e.push("/join-room?host=true")}})]})},O=n(6),b={SET_IS_ROOM_HOST:"SET_IS_ROOM_HOST",SET_CONNECT_ONLY_WITH_AUDIO:"SET_CONNECT_ONLY_WITH_AUDIO",SET_IDENTITY:"SET_IDENTITY",SET_ROOM_ID:"SET_ROOM_ID",SET_SHOW_OVERLAY:"SET_SHOW_OVERLAY",SET_PARTICIPANTS:"SET_PARTICIPANTS",SET_MESSAGES:"SET_MESSAGES",SET_ACTIVE_CONVERSATION:"SET_ACTIVE_CONVERSATION",SET_DIRECT_CHAT_HISTORY:"SET_DIRECT_CHAT_HISTORY",SET_SOCKET_ID:"SET_SOCKET_ID"},m=function(e){return{type:b.SET_IS_ROOM_HOST,isRoomHost:e}},v=function(e){return{type:b.SET_ROOM_ID,roomId:e}},f=function(e){return{type:b.SET_SHOW_OVERLAY,showOverlay:e}},h=function(e){return{type:b.SET_DIRECT_CHAT_HISTORY,directChatHistory:e}},p=b,g=(n(94),Object(O.b)(null,(function(e){return{setIsRoomHostAction:function(t){return e(m(t))}}}))((function(e){var t=e.setIsRoomHostAction;return Object(a.useEffect)((function(){t(!1)}),[]),Object(l.jsx)("div",{className:"introduction_page_container",children:Object(l.jsxs)("div",{className:"introduction_page_panel",children:[Object(l.jsx)("img",{src:"data:image/png;base64,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",className:"introduction_page_image"}),Object(l.jsx)(j,{})]})})}))),_=n(2),x=function(e){var t=e.isRoomHost?"Host meeting":"Join meeting";return Object(l.jsx)("p",{className:"join_room_title",children:t})},A=n(7),y=n(21),S=n(11),N=function(e){var t=e.placeholder,n=e.value,c=e.changeHandler;return Object(l.jsx)("input",{value:n,onChange:c,className:"join_room_input",placeholder:t})},I=function(e){var t=e.roomIdValue,n=e.setRoomIdValue,c=e.nameValue,a=e.setNameValue,o=e.isRoomHost;return Object(l.jsxs)("div",{className:"join_room_inputs_container",children:[!o&&Object(l.jsx)(N,{placeholder:"Enter meeting ID",value:t,changeHandler:function(e){n(e.target.value)}}),Object(l.jsx)(N,{placeholder:"Enter your Name",value:c,changeHandler:function(e){a(e.target.value)}})]})},T=function(e){var t=e.connectOnlyWithAudio,n=e.setConnectOnlyWithAudio;return Object(l.jsxs)("div",{className:"checkbox_container",children:[Object(l.jsx)("div",{className:"checkbox_connection",onClick:function(){n(!t)},children:t&&Object(l.jsx)("img",{className:"checkbox_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABiSURBVHgB7ZHBCQAgCEUdpREaoY0boREaoREawQw8hNShFLz04EOHz8MU4OMKIgZKpkTQwrJG6fMNGoRMN52fjMvltI/ryWaJy01Kn7+5k6p3JqTJ5ACLFE2uuUiriezjywAgdcf6AfL4kwAAAABJRU5ErkJggg=="})}),Object(l.jsx)("p",{className:"checkbox_container_paragraph",children:"Only audio"})]})},E=function(e){var t=e.errorMessage;return Object(l.jsx)("div",{className:"error_message_container",children:t&&Object(l.jsx)("p",{className:"error_message_paragraph",children:t})})},C=function(e){var t=e.buttonText,n=e.cancelButton,c=void 0!==n&&n,a=e.onClickHandler,o=c?"join_room_cancel_button":"join_room_success_button";return Object(l.jsx)("button",{onClick:a,className:o,children:t})},R=function(e){var t=e.handleJoinRoom,n=e.isRoomHost?"Host":"Join",c=Object(u.f)();return Object(l.jsxs)("div",{className:"join_room_buttons_container",children:[Object(l.jsx)(C,{buttonText:n,onClickHandler:t}),Object(l.jsx)(C,{buttonText:"Cancel",cancelButton:!0,onClickHandler:function(){c.push("/")}})]})},k=n(53),H=n.n(k),w="http://localhost:5002/api",D=function(){var e=Object(y.a)(Object(A.a)().mark((function e(t){var n;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.a.get("".concat(w,"/room-exists/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(y.a)(Object(A.a)().mark((function e(){var t;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.a.get("".concat(w,"/get-turn-credentials"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=Object(O.b)((function(e){return Object(_.a)({},e)}),(function(e){return{setConnectOnlyWithAudio:function(t){return e(function(e){return{type:b.SET_CONNECT_ONLY_WITH_AUDIO,onlyWithAudio:e}}(t))},setIdentityAction:function(t){return e(function(e){return{type:b.SET_IDENTITY,identity:e}}(t))},setRoomIdAction:function(t){return e(v(t))}}}))((function(e){var t=e.isRoomHost,n=e.setConnectOnlyWithAudio,c=e.connectOnlyWithAudio,o=e.setIdentityAction,r=e.setRoomIdAction,s=Object(a.useState)(""),i=Object(S.a)(s,2),d=i[0],j=i[1],O=Object(a.useState)(""),b=Object(S.a)(O,2),m=b[0],v=b[1],f=Object(a.useState)(null),h=Object(S.a)(f,2),p=h[0],g=h[1],_=Object(u.f)(),x=function(){var e=Object(y.a)(Object(A.a)().mark((function e(){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(m),!t){e.next=5;break}C(),e.next=7;break;case 5:return e.next=7,N();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(y.a)(Object(A.a)().mark((function e(){var t,n,c;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(d);case 2:t=e.sent,n=t.roomExists,c=t.full,n?c?g("Meeting is full. Please try again later."):(r(d),_.push("/room")):g("Meeting not found. Check your meeting id.");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){_.push("/room")};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(I,{roomIdValue:d,setRoomIdValue:j,nameValue:m,setNameValue:v,isRoomHost:t}),Object(l.jsx)(T,{setConnectOnlyWithAudio:n,connectOnlyWithAudio:c}),Object(l.jsx)(E,{errorMessage:p}),Object(l.jsx)(R,{handleJoinRoom:x,isRoomHost:t})]})})),W=(n(113),Object(O.b)((function(e){return Object(_.a)({},e)}),(function(e){return{setIsRoomHostAction:function(t){return e(m(t))}}}))((function(e){var t=e.setIsRoomHostAction,n=e.isRoomHost,c=Object(u.g)().search;return Object(a.useEffect)((function(){new URLSearchParams(c).get("host")&&t(!0)}),[]),Object(l.jsx)("div",{className:"join_room_page_container",children:Object(l.jsxs)("div",{className:"join_room_page_panel",children:[Object(l.jsx)(x,{isRoomHost:n}),Object(l.jsx)(B,{})]})})}))),P=function(){return Object(l.jsx)("div",{className:"chat_label_container",children:Object(l.jsx)("p",{className:"chat_label_paragraph",children:"CHAT"})})},Y=function(e){var t=e.author,n=e.content,c=e.sameAuthor,a=e.messageCreatedByMe,o=a?"message_align_right":"message_align_left",r=a?"You":t,s=a?"message_right_styles":"message_left_styles";return Object(l.jsxs)("div",{className:"message_container ".concat(o),children:[!c&&Object(l.jsx)("p",{className:"message_title",children:r}),Object(l.jsx)("p",{className:"message_content ".concat(s),children:n})]})},V=Object(O.b)((function(e){return Object(_.a)({},e)}))((function(e){var t=e.messages;return Object(l.jsx)("div",{className:"messages_container",children:t.map((function(e,n){var c=n>0&&e.identity===t[n-1].identity;return Object(l.jsx)(Y,{author:e.identity,content:e.content,sameAuthor:c,messageCreatedByMe:e.messageCreatedByMe},"".concat(e.content).concat(n))}))})})),M=n.p+"static/media/sendMessageButton.9add4f6d.svg",G=n(29),J=n(76),Q={identity:"",isRoomHost:!1,connectOnlyWithAudio:!1,roomId:null,showOverlay:!0,participants:[],messages:[],activeConversation:null,directChatHistory:[],socketId:null},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.SET_IS_ROOM_HOST:return Object(_.a)(Object(_.a)({},e),{},{isRoomHost:t.isRoomHost});case p.SET_CONNECT_ONLY_WITH_AUDIO:return Object(_.a)(Object(_.a)({},e),{},{connectOnlyWithAudio:t.onlyWithAudio});case p.SET_ROOM_ID:return Object(_.a)(Object(_.a)({},e),{},{roomId:t.roomId});case p.SET_IDENTITY:return Object(_.a)(Object(_.a)({},e),{},{identity:t.identity});case p.SET_SHOW_OVERLAY:return Object(_.a)(Object(_.a)({},e),{},{showOverlay:t.showOverlay});case p.SET_PARTICIPANTS:return Object(_.a)(Object(_.a)({},e),{},{participants:t.participants});case p.SET_MESSAGES:return Object(_.a)(Object(_.a)({},e),{},{messages:t.messages});case p.SET_ACTIVE_CONVERSATION:return Object(_.a)(Object(_.a)({},e),{},{activeConversation:t.activeConversation});case p.SET_DIRECT_CHAT_HISTORY:return Object(_.a)(Object(_.a)({},e),{},{directChatHistory:t.directChatHistory});case p.SET_SOCKET_ID:return Object(_.a)(Object(_.a)({},e),{},{socketId:t.socketId});default:return e}},L=Object(J.a)({reducer:K}),F=L,X=n(79),z=function(e,t){var n=Object(G.a)(F.getState().directChatHistory),c=n.find((function(t){return t.socketId===e}));if(c){var a={isAuthor:t.isAuthor,messageContent:t.messageContent,identity:t.identity},o=Object(_.a)(Object(_.a)({},c),{},{chatHistory:[].concat(Object(G.a)(c.chatHistory),[a])}),r=[].concat(Object(G.a)(n.filter((function(t){return t.socketId!==e}))),[o]);F.dispatch(h(r))}else{var s={socketId:e,chatHistory:[{isAuthor:t.isAuthor,messageContent:t.messageContent,identity:t.identity}]},i=[].concat(Object(G.a)(n),[s]);F.dispatch(h(i))}},Z=null,q=function(){(Z=Object(X.a)("http://localhost:5002")).on("connect",(function(){var e;console.log("successfully connected with socket io server"),console.log(Z.id),F.dispatch((e=Z.id,{type:b.SET_SOCKET_ID,socketId:e}))})),Z.on("room-id",(function(e){var t=e.roomId;F.dispatch(v(t))})),Z.on("room-update",(function(e){var t=e.connectedUsers;F.dispatch({type:b.SET_PARTICIPANTS,participants:t})})),Z.on("conn-prepare",(function(e){var t=e.connUserSocketId;de(t,!1),Z.emit("conn-init",{connUserSocketId:t})})),Z.on("conn-signal",(function(e){je(e)})),Z.on("conn-init",(function(e){var t=e.connUserSocketId;de(t,!0)})),Z.on("user-disconnected",(function(e){Oe(e)})),Z.on("direct-message",(function(e){!function(e){var t=e.isAuthor,n=e.receiverSocketId,c=e.authorSocketId;z(t?n:c,e)}(e)}))},$=function(e,t){var n={identity:e,onlyAudio:t};Z.emit("create-new-room",n)},ee=function(e,t,n){var c={roomId:t,identity:e,onlyAudio:n};Z.emit("join-room",c)},te=n(78),ne=n.n(te),ce=null,ae=function(){var e=Object(y.a)(Object(A.a)().mark((function e(){var t,n;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:return n=e.sent,null!==(t=n.token)&&void 0!==t&&t.iceServers&&(ce=n.token.iceServers),e.abrupt("return",ce);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe={audio:!0,video:{width:"480",height:"360"}},re={audio:!0,video:!1},se=function(){var e=Object(y.a)(Object(A.a)().mark((function e(t,n){var a,o,r,s=arguments;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:null,o=s.length>3?s[3]:void 0,e.next=4,ae();case 4:r=o?re:oe,navigator.mediaDevices.getUserMedia(r).then((function(e){console.log("successfuly received local stream"),be(c=e),F.dispatch(f(!1)),t?$(n,o):ee(n,a,o)})).catch((function(e){console.log("error occurred when trying to get an access to local stream"),console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie={},ue=[],le=function(){var e=ce;return e?{iceServers:[{urls:"stun:stun.l.google.com:19302"}].concat(Object(G.a)(e))}:(console.warn("Using only STUN server"),{iceServers:[{urls:"stun:stun.l.google.com:19302"}]})},de=function(e,t){var n=le();ie[e]=new ne.a({initiator:t,config:n,stream:c,channelName:"messenger"}),ie[e].on("signal",(function(t){!function(e){Z.emit("conn-signal",e)}({signal:t,connUserSocketId:e})})),ie[e].on("stream",(function(t){console.log("new stream came"),me(t,e),ue=[].concat(Object(G.a)(ue),[t])})),ie[e].on("data",(function(e){var t=JSON.parse(e);pe(t)}))},je=function(e){ie[e.connUserSocketId].signal(e.signal)},Oe=function(e){var t=e.socketId,n=document.getElementById(t),c=document.getElementById("".concat(t,"-video"));n&&c&&(c.srcObject.getTracks().forEach((function(e){return e.stop()})),c.srcObject=null,n.removeChild(c),n.parentNode.removeChild(n),ie[t]&&ie[t].destroy(),delete ie[t])},be=function(e){var t=document.getElementById("videos_portal");t.classList.add("videos_portal_styles");var n=document.createElement("div");n.classList.add("video_track_container");var c=document.createElement("video");c.autoplay=!0,c.muted=!0,c.srcObject=e,c.onloadedmetadata=function(){c.play()},n.appendChild(c),F.getState().connectOnlyWithAudio&&n.appendChild(ve()),t.appendChild(n)},me=function(e,t){var n=document.getElementById("videos_portal"),c=document.createElement("div");c.id=t,c.classList.add("video_track_container");var a=document.createElement("video");a.autoplay=!0,a.srcObject=e,a.id="".concat(t,"-video"),a.onloadedmetadata=function(){a.play()},a.addEventListener("click",(function(){a.classList.contains("full_screen")?a.classList.remove("full_screen"):a.classList.add("full_screen")})),c.appendChild(a);var o=F.getState().participants.find((function(e){return e.socketId===t}));console.log(o),null!==o&&void 0!==o&&o.onlyAudio?c.appendChild(ve(o.identity)):c.style.position="static",n.appendChild(c)},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("div");t.classList.add("label_only_audio_container");var n=document.createElement("p");return n.classList.add("label_only_audio_text"),n.innerHTML="Only audio ".concat(e),t.appendChild(n),t},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;he(e?c:t)},he=function(e){for(var t in ie)for(var n in ie[t].streams[0].getTracks())for(var c in e.getTracks())if(ie[t].streams[0].getTracks()[n].kind===e.getTracks()[c].kind){ie[t].replaceTrack(ie[t].streams[0].getTracks()[n],e.getTracks()[c],ie[t].streams[0]);break}},pe=function(e){var t=F.getState().messages;F.dispatch(function(e){return{type:b.SET_MESSAGES,messages:e}}([].concat(Object(G.a)(t),[e])))},ge=function(){var e=Object(a.useState)(""),t=Object(S.a)(e,2),n=t[0],c=t[1],o=function(){n.length>0&&(!function(e){var t=F.getState().identity;pe({content:e,identity:t,messageCreatedByMe:!0});var n={content:e,identity:t},c=JSON.stringify(n);for(var a in ie)ie[a].send(c)}(n),c(""))};return Object(l.jsxs)("div",{className:"new_message_container",children:[Object(l.jsx)("input",{className:"new_message_input",value:n,onChange:function(e){c(e.target.value)},placeholder:"Type your message ...",type:"text",onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),o())}}),Object(l.jsx)("img",{className:"new_message_button",src:M,onClick:o})]})},_e=function(){return Object(l.jsxs)("div",{className:"chat_section_container",children:[Object(l.jsx)(P,{}),Object(l.jsx)(V,{}),Object(l.jsx)(ge,{})]})},xe=function(){return Object(l.jsx)("div",{className:"participants_label_container",children:Object(l.jsx)("p",{className:"participants_label_paragraph",children:"PARTICIPANTS"})})},Ae=function(e){var t=e.identity,n=e.lastItem,c=e.participant,a=e.setActiveConversationAction,o=e.socketId;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{className:"participants_paragraph",onClick:function(){c.socketId!==o&&a(c)},children:t}),!n&&Object(l.jsx)("span",{className:"participants_separator_line"})]})},ye=Object(O.b)((function(e){return Object(_.a)({},e)}),(function(e){return{setActiveConversationAction:function(t){return e(function(e){return{type:b.SET_ACTIVE_CONVERSATION,activeConversation:e}}(t))}}}))((function(e){var t=e.participants,n=e.setActiveConversationAction,c=e.socketId;return Object(l.jsx)("div",{className:"participants_container",children:t.map((function(e,a){return Object(l.jsx)(Ae,{lastItem:t.length===a+1,participant:e,identity:e.identity,setActiveConversationAction:n,socketId:c},e.identity)}))})})),Se=function(e){var t=e.isAuthor,n=e.messageContent,c=t?"author_direct_message":"receiver_direct_message",a=t?"direct_message_container_author":"direct_message_container_receiver";return Object(l.jsx)("div",{className:a,children:Object(l.jsx)("p",{className:c,children:n})})},Ne=function(e){var t=e.messages,n=Object(a.useRef)();return Object(a.useEffect)((function(){n&&n.current.scrollIntoView({behavior:"smooth"})}),[t]),Object(l.jsxs)("div",{className:"direct_messages_container",children:[t.map((function(e){return Object(l.jsx)(Se,{messageContent:e.messageContent,isAuthor:e.isAuthor},"".concat(e.messageContent,"-").concat(e.identity))})),Object(l.jsx)("div",{ref:n})]})},Ie=Object(O.b)((function(e){return Object(_.a)({},e)}))((function(e){var t=e.activeConversation,n=e.identity,c=Object(a.useState)(""),o=Object(S.a)(c,2),r=o[0],s=o[1],i=function(){var e;e={receiverSocketId:t.socketId,identity:n,messageContent:r},Z.emit("direct-message",e),s("")};return Object(l.jsxs)("div",{className:"new_message_container new_message_direct_border",children:[Object(l.jsx)("input",{className:"new_message_input",value:r,onChange:function(e){s(e.target.value)},placeholder:"Type your message..",type:"text",onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),i())}}),Object(l.jsx)("img",{className:"new_message_button",src:M,onClick:i})]})})),Te=function(){return Object(l.jsx)("div",{className:"conversation_not_chosen_overlay",children:Object(l.jsx)("p",{className:"conversation_not_chosen_overlay_text",children:"Conversation not chosen"})})},Ee=function(e){var t=e.activeConversation;return Object(l.jsx)("div",{className:"direct_chat_header",children:Object(l.jsx)("p",{className:"direct_chat_header_paragraph",children:t?t.identity:""})})},Ce=Object(O.b)((function(e){return Object(_.a)({},e)}))((function(e){var t=e.activeConversation,n=e.directChatHistory,c=Object(a.useState)([]),o=Object(S.a)(c,2),r=o[0],s=o[1];return Object(a.useEffect)((function(){s(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(console.log(e),console.log(t),!t||!e)return[];var n=e.find((function(e){return e.socketId===t}));return n?n.chatHistory:[]}(n,t?t.socketId:null))}),[t,n]),Object(l.jsxs)("div",{className:"direct_chat_container",children:[Object(l.jsx)(Ee,{activeConversation:t}),Object(l.jsx)(Ne,{messages:r}),Object(l.jsx)(Ie,{}),!t&&Object(l.jsx)(Te,{})]})})),Re=function(){return Object(l.jsxs)("div",{className:"participants_section_container",children:[Object(l.jsx)(xe,{}),Object(l.jsx)(ye,{}),Object(l.jsx)(Ce,{})]})},ke=n.p+"static/media/camera.b50348a3.svg",He=n.p+"static/media/cameraOff.a61d4a02.svg",we=function(){var e=Object(a.useState)(!1),t=Object(S.a)(e,2),n=t[0],o=t[1];return Object(l.jsx)("div",{className:"video_button_container",children:Object(l.jsx)("img",{src:n?He:ke,className:"video_button_image",onClick:function(){var e;e=n,c.getVideoTracks()[0].enabled=!!e,o(!n)}})})},De=function(){return Object(l.jsx)("div",{className:"video_button_container",children:Object(l.jsx)("button",{className:"video_button_end",onClick:function(){var e=window.location.origin;window.location.href=e},children:"Leave Room"})})},Ue=n.p+"static/media/mic.c9c9788e.svg",Be=n.p+"static/media/micOff.3a72f682.svg",We=function(){var e=Object(a.useState)(!1),t=Object(S.a)(e,2),n=t[0],o=t[1];return Object(l.jsx)("div",{className:"video_button_container",children:Object(l.jsx)("img",{src:n?Be:Ue,onClick:function(){var e;e=n,c.getAudioTracks()[0].enabled=!!e,o(!n)},className:"video_button_image"})})},Pe=n.p+"static/media/switchToScreenSharing.900d9338.svg",Ye=function(e){var t=e.stream,n=Object(a.useRef)();return Object(a.useEffect)((function(){var e=n.current;e.srcObject=t,e.onloadedmetadata=function(){e.play()}}),[t]),Object(l.jsx)("div",{className:"local_screen_share_preview",children:Object(l.jsx)("video",{muted:!0,autoPlay:!0,ref:n})})},Ve={audio:!1,video:!0},Me=function(){var e=Object(a.useState)(!1),t=Object(S.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),r=Object(S.a)(o,2),s=r[0],i=r[1],u=function(){var e=Object(y.a)(Object(A.a)().mark((function e(){var t;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=14;break}return t=null,e.prev=2,e.next=5,navigator.mediaDevices.getDisplayMedia(Ve);case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("error occurred when trying to get an access to screen share stream");case 11:t&&(i(t),fe(n,t),c(!0)),e.next=18;break;case 14:fe(n),c(!1),s.getTracks().forEach((function(e){return e.stop()})),i(null);case 18:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"video_button_container",children:Object(l.jsx)("img",{src:Pe,onClick:u,className:"video_button_image"})}),n&&Object(l.jsx)(Ye,{stream:s})]})},Ge=Object(O.b)((function(e){return Object(_.a)({},e)}))((function(e){var t=e.connectOnlyWithAudio;return Object(l.jsxs)("div",{className:"video_buttons_container",children:[Object(l.jsx)(We,{}),!t&&Object(l.jsx)(we,{}),Object(l.jsx)(De,{}),!t&&Object(l.jsx)(Me,{})]})})),Je=function(){return Object(l.jsx)("div",{className:"video_section_container",children:Object(l.jsx)(Ge,{})})},Qe=function(e){var t=e.roomId;return Object(l.jsx)("div",{className:"room_label",children:Object(l.jsxs)("p",{className:"room_label_paragraph",children:["ID: ",t," "]})})},Ke=function(){return Object(l.jsx)("div",{className:"overlay_container",children:Object(l.jsx)("div",{className:"loader"})})},Le=(n(147),Object(O.b)((function(e){return Object(_.a)({},e)}))((function(e){var t=e.roomId,n=e.identity,c=e.isRoomHost,o=e.showOverlay,r=e.connectOnlyWithAudio;return Object(a.useEffect)((function(){if(c||t)se(c,n,t,r);else{var e=window.location.origin;window.location.href=e}}),[]),Object(l.jsxs)("div",{className:"room_container",children:[Object(l.jsx)(Re,{}),Object(l.jsx)(Je,{}),Object(l.jsx)(_e,{}),Object(l.jsx)(Qe,{roomId:t}),o&&Object(l.jsx)(Ke,{})]})})));n(148);var Fe=function(){return Object(a.useEffect)((function(){q()}),[]),Object(l.jsx)(i.a,{children:Object(l.jsxs)(u.c,{children:[Object(l.jsx)(u.a,{path:"/join-room",children:Object(l.jsx)(W,{})}),Object(l.jsx)(u.a,{path:"/room",children:Object(l.jsx)(Le,{})}),Object(l.jsx)(u.a,{path:"/",children:Object(l.jsx)(g,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(O.a,{store:L,children:Object(l.jsx)(Fe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},84:function(e,t,n){},94:function(e,t,n){}},[[149,1,2]]]);
//# sourceMappingURL=main.9c0746e3.chunk.js.map